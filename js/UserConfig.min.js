var id = $('#myId').val()
var Url = '../config/config.jp.php'
$(document).ready(function () {
    profil()
    salary()
})

function salary() {
    // alert(id)
    $.ajax({
        url: Url,
        method: 'POST',
        dataType: 'JSON',
        data: { action: 'salaryEmployee', id },
        success: function (data) {
            let output = ''
            console.log(data)
            if (data.length > 0) {
                data.forEach(element => {
                    output += `
                        <div class="card my-1">
                            <div class="card-header">
                                <h2>Salary of this ${element.created_at}</h2>
                            </div>
                            <div class="card-body">
                                <p class="d-flex justify-content-between">
                                    <span>Amount:</span>
                                    <span>${element.amount}</span>
                                </p>
                            </div>
                        </div>
                    `
                })
            } else {
                if (data.length === 1) {
                    output += `<p class="text-center alert alert-success">You're be never be payed</p>`
                }
                output += `<p class="text-center alert alert-danger">You're be never be payed ${data.length}</p>`
            }
            $('#salary').html(output)
        }
    })
}
function profil() {
    $.ajax({
        url: Url,
        method: 'POST',
        dataType: 'JSON',
        data: { action: 'profil', id },
        success: function (data) {
            let day = new Date(data.created_at)
            day = `${day.getDate() < 10 ? '0' : ''}${day.getDate()}:${day.getMonth() < 10 ? '0' : ''}${day.getMonth()}:${day.getFullYear()}`
            $('#profil').html(

                `
                <div class="card">
                    <div class="card-header">
                        <h3 class="text-center">Welcome Dear/${data.fullname}</h3>
                    </div>
                    <div class="card-body">
                    <table class="table tablesorter " id="plain-table">
                    <thead class=" text-primary">
                      <tr>
                        <th class="header">
                          FIELD
                        </th>
                        
                        <th class="header">
                          VALUE
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Username: </td>
                        <td>${data.username}</td>
                      </tr>
                      <tr>
                        <td>fullname: </td>
                        <td>${data.fullname}</td>
                      </tr>
                      <tr>
                        <td>E-mail:</td>
                        <td>${data.email}</td>
                      </tr>
                      <tr>
                        <td>Gender:</td>
                        <td>${data.gender}</td>
                      </tr>
                      <tr>
                        <td>Status:</td>
                        <td>${data.status}</td>
                      </tr>
                      <tr>
                        <td>Partner:</td>
                        <td>${data.woman_name ? '' : 'No data'}</td>
                      </tr>
                      <tr>
                        <td>Number of kid:</td>
                        <td>${data.children}</td>
                      </tr>
                      <tr>
                        <td>Salary:</td>
                        <td>${data.salary}</td>
                      </tr>
                      <tr>
                        <td>Job status:</td>
                        <td>${data.oper}</td>
                      </tr>
                      <tr>
                        <td>Started at:</td>
                        <td>${day}</td>
                      </tr>
                    </tbody>
                  </table>
                    </div>
                </div>
                `

            )
        }
    })
}